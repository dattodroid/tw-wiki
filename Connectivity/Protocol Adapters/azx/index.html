<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><link href="https://dattodroid.github.io/tw-wiki/Connectivity/Protocol%20Adapters/azx/" rel="canonical"/><link href="../../AlwaysOn%20Edges/nsdk/" rel="prev"/><link href="../cxs/" rel="next"/><link href="../../../assets/images/favicon.png" rel="icon"/><meta content="mkdocs-1.6.1, mkdocs-material-9.6.5" name="generator"/><title>Azure IoTHub Connector - My Thingworx Wiki</title><link href="../../../assets/stylesheets/main.8608ea7d.min.css" rel="stylesheet"/><link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../../../stylesheets/extra.css" rel="stylesheet"/><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body data-md-color-accent="deep-orange" data-md-color-primary="black" data-md-color-scheme="default" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#azure-iothub-connector"> Skip to content </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="My Thingworx Wiki" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="My Thingworx Wiki"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> My Thingworx Wiki </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Azure IoTHub Connector </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="deep-orange" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="black" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="deep-orange" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0"> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../.."> Welcome to My Thingworx Wiki </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../../tags/"> Tags </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a class="md-tabs__link" href="../../"> Connectivity </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../../Platform/dataordering/"> Platform </a> </li> </ul> </div> </nav> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="My Thingworx Wiki" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="My Thingworx Wiki"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> My Thingworx Wiki </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../.."> <span class="md-ellipsis"> Welcome to My Thingworx Wiki </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../tags/"> <span class="md-ellipsis"> Tags </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/> <div class="md-nav__link md-nav__container"> <a class="md-nav__link" href="../../"> <span class="md-ellipsis"> Connectivity </span> </a> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex=""> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Connectivity </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../mqtt/"> <span class="md-ellipsis"> MQTT </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex=""> <span class="md-ellipsis"> AlwaysOn Edges </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_3_3"> <span class="md-nav__icon md-icon"></span> AlwaysOn Edges </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../AlwaysOn%20Edges/csdk/"> <span class="md-ellipsis"> C SDK </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../AlwaysOn%20Edges/ems/"> <span class="md-ellipsis"> EMS / LSR </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../AlwaysOn%20Edges/jsdk/"> <span class="md-ellipsis"> Java SDK </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../AlwaysOn%20Edges/kepserver/"> <span class="md-ellipsis"> KEPServer TNI </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../AlwaysOn%20Edges/nsdk/"> <span class="md-ellipsis"> .NET SDK </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/> <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex=""> <span class="md-ellipsis"> Protocol Adapters </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_3_4"> <span class="md-nav__icon md-icon"></span> Protocol Adapters </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Azure IoTHub Connector </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./"> <span class="md-ellipsis"> Azure IoTHub Connector </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#overview"> <span class="md-ellipsis"> Overview </span> </a> <nav aria-label="Overview" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#key-capabilities"> <span class="md-ellipsis"> Key Capabilities </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#entities"> <span class="md-ellipsis"> Entities </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#features"> <span class="md-ellipsis"> Features </span> </a> <nav aria-label="Features" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#device-provisioning"> <span class="md-ellipsis"> Device Provisioning </span> </a> <nav aria-label="Device Provisioning" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#services"> <span class="md-ellipsis"> Services </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#events"> <span class="md-ellipsis"> Events </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#ingress"> <span class="md-ellipsis"> Ingress </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#egress"> <span class="md-ellipsis"> Egress </span> </a> <nav aria-label="Egress" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#cloud-to-device-message"> <span class="md-ellipsis"> Cloud-to-device message </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#direct-method"> <span class="md-ellipsis"> Direct Method </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#file-transfers"> <span class="md-ellipsis"> File Transfers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#device-jobs"> <span class="md-ellipsis"> Device jobs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#quick-setup-windows"> <span class="md-ellipsis"> Quick Setup (Windows) </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#troubleshooting"> <span class="md-ellipsis"> Troubleshooting </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#class-diagram"> <span class="md-ellipsis"> Class Diagram </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#external-resources"> <span class="md-ellipsis"> External Resources </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../cxs/"> <span class="md-ellipsis"> AlwaysOn Connector </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../emx/"> <span class="md-ellipsis"> eMessage Connector </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/> <div class="md-nav__link md-nav__container"> <a class="md-nav__link" href="../../REST/"> <span class="md-ellipsis"> REST </span> </a> <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex=""> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_3_5"> <span class="md-nav__icon md-icon"></span> REST </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../REST/swagger/"> <span class="md-ellipsis"> Swagger UI </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-ellipsis"> Platform </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Platform </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../Platform/dataordering/"> <span class="md-ellipsis"> Data Ordering </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../Platform/extensionsdk/"> <span class="md-ellipsis"> Extension SDK </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../Platform/filetransfer/"> <span class="md-ellipsis"> File Transfer </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../Platform/peristence/"> <span class="md-ellipsis"> Persistence / Database </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../Platform/snippet/"> <span class="md-ellipsis"> Service Script snippets </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#overview"> <span class="md-ellipsis"> Overview </span> </a> <nav aria-label="Overview" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#key-capabilities"> <span class="md-ellipsis"> Key Capabilities </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#entities"> <span class="md-ellipsis"> Entities </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#features"> <span class="md-ellipsis"> Features </span> </a> <nav aria-label="Features" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#device-provisioning"> <span class="md-ellipsis"> Device Provisioning </span> </a> <nav aria-label="Device Provisioning" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#services"> <span class="md-ellipsis"> Services </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#events"> <span class="md-ellipsis"> Events </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#ingress"> <span class="md-ellipsis"> Ingress </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#egress"> <span class="md-ellipsis"> Egress </span> </a> <nav aria-label="Egress" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#cloud-to-device-message"> <span class="md-ellipsis"> Cloud-to-device message </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#direct-method"> <span class="md-ellipsis"> Direct Method </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#file-transfers"> <span class="md-ellipsis"> File Transfers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#device-jobs"> <span class="md-ellipsis"> Device jobs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#quick-setup-windows"> <span class="md-ellipsis"> Quick Setup (Windows) </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#troubleshooting"> <span class="md-ellipsis"> Troubleshooting </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#class-diagram"> <span class="md-ellipsis"> Class Diagram </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#external-resources"> <span class="md-ellipsis"> External Resources </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <nav class="md-tags"> <a class="md-tag" href="../../../tags/#tag:connector">connector</a> </nav> <h1 id="azure-iothub-connector">Azure IoTHub Connector</h1> <h2 id="overview">Overview</h2> <p>Protocol adapter for integrating Azure IoT Hub and Azure Blob Storage with Thingworx. The connector's nickname is <strong>AZX</strong>.</p> <h3 id="key-capabilities">Key Capabilities</h3> <ul> <li>Ingest <strong>device-to-cloud</strong> (telemetry) data from Azure (Edge) Devices</li> <li>Send <strong>cloud-to-device</strong> (c2d) data and invoke <strong>Direct Methods</strong> on Azure (Edge) Devices</li> <li>Manage <strong>File Transfers</strong> with Azure Blob Storage containers</li> <li>Azure Industrial IoT (IIoT) OPC UA integration (not covered in this document)</li> </ul> <h2 id="entities">Entities</h2> <p>See also <a data-preview="data-preview" href="#class-diagram">Class Diagram</a></p> <ul> <li> <p>The <strong>Thingworx Azure IoT Connector</strong> is a standalone Java executable. </p> <p>It is exposed on the platform as an <code>AzureIotHubTemplate</code> Thing. That entity holds the connector configurations and handles the interactions with it.</p> </li> <li> <p>An <strong>Azure (edge) Device</strong> is defined in Thingworx as an <code>AzureIotThing</code> Thing. It is linked to the <code>AzureIotHubTemplate</code> Thing via the <code>gatewayThing</code> property.</p> <p>Ingress and Egress are exposed as user-defined Remote Properties and Services on the <code>AzureIotThing</code> Things.</p> <p>The routing of IoT Hub messages to and from Thingworx relies on the <strong>"same name"</strong> convention:</p> <table> <thead> <tr> <th>Platform</th> <th style="text-align: center;"></th> <th>Azure IotHub</th> </tr> </thead> <tbody> <tr> <td>Thing name</td> <td style="text-align: center;">=</td> <td><code>deviceId</code></td> </tr> <tr> <td>Remote Property name <a href="#ingress">(Ingress)</a></td> <td style="text-align: center;">=</td> <td>Device-to-cloud (telemetry) message data name</td> </tr> <tr> <td>Remote Property name <a href="#cloud-to-device-message">(Egress)</a></td> <td style="text-align: center;">=</td> <td>Cloud-to-device (c2d) message data name</td> </tr> <tr> <td>Remote Service name <a href="#direct-method">(Egress)</a></td> <td style="text-align: center;">=</td> <td>Direct method name</td> </tr> </tbody> </table> <p>For IoT Edge Devices, the remote services or properties must be defined using the format: <code>moduleID</code>::<code>methodName</code> or<code>moduleID</code>::<code>propertyName</code>.</p> </li> <li> <p>An <strong>Azure Storage Account</strong> is exposed in Thingworx as an <code>AzureBlobStorageTemplate</code> Thing. It is possible to register up to 2 Azure Storage Accounts. One (required) is used internally by the connector as a checkpoint store (eventProcessorHostBlobThing), and one (optional) for File storage (fileRepositoryBlobThing). It is not recommended to use the same Storage Account for both use cases.</p> <p>A blob storage <strong>container</strong> used for File storage is defined in Thingworx as <code>AzureStorageContainerFileRepository</code> Things. It implements <code>FileRepository</code> and behave as such.</p> </li> <li> <p>The <code>ConnectionServicesHub</code> Thing holds helper services, primarily for device provisioning and job activities.</p> </li> </ul> <h2 id="features">Features</h2> <h3 id="device-provisioning">Device Provisioning</h3> <p>The <code>ConnectionServicesHub</code> holds services and events related to device provisioning and lifecycle.</p> <h4 id="services">Services</h4> <ul> <li><code>CreateAzureIotDevice</code> — Registers a new device in your Azure IoT Hub</li> <li><code>DeleteAzureIotDevice</code> — Removes the specified device from your Azure IoT Hub</li> <li><code>ImportAzureIotDevices</code> — Imports devices from an Azure IoT Hub into the platform as Things. The <code>AzureThingImportStatusEvent</code> is fired from the <code>ConnectionServicesHub</code> when the import has completed.</li> </ul> <h4 id="events">Events</h4> <ul> <li><code>AzureThingLifecycleEvent</code> — This event is fired after a lifecycle event occurs on a device in Azure IoT Hub. The event fields are:<ul> <li><code>deviceId</code>: Azure IoT device identifier</li> <li><code>status</code>: Lifecycle status, such as deleteDeviceIdentity or createDeviceIdentity</li> <li><code>twin</code>: Value of the device twin at the time of creation or deletion. The Azure IoT Hub must be configured to route the Device Lifecycle Events to the endpoint consumed by the Connector (generally be enabled by default).</li> </ul> </li> </ul> <h3 id="ingress">Ingress</h3> <p>Device-to-cloud (telemetry) messages are exposed on the <code>AzureIotThing</code> Thing as <strong>Remote Properties</strong>.</p> <h5 id="examples-1">Examples 1</h5> <p><div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">{</span><span class="nt">"messageId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">"deviceId"</span><span class="p">:</span><span class="s2">"Devkit playground"</span><span class="p">,</span><span class="nt">"temperature"</span><span class="p">:</span><span class="s2">"24.39"</span><span class="p">,</span><span class="nt">"humidity"</span><span class="p">:</span><span class="s2">"77.84"</span><span class="p">}</span>
</span></code></pre></div> The <strong>temperature</strong> reading can be exposed as a remote property named <code>temperature</code> of type NUMBER.</p> <h5 id="examples-2">Examples 2</h5> <p><div class="language-json highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="p">{</span><span class="nt">"messageId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">"deviceId"</span><span class="p">:</span><span class="s2">"Devkit playground"</span><span class="p">,</span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"temperature"</span><span class="p">:</span><span class="s2">"24.39"</span><span class="p">,</span><span class="nt">"humidity"</span><span class="p">:</span><span class="s2">"77.84"</span><span class="p">}}</span>
</span></code></pre></div> The <strong>temperature</strong> reading is nested and cannot directly be mapped to a Thingworx property. The <strong>payload</strong> can be exposed as a remote property named <code>payload</code> of type JSON. The temperature can subsequently be extracted from the payload property, for example from a DataChange subscription.</p> <h3 id="egress">Egress</h3> <h4 id="cloud-to-device-message">Cloud-to-device message</h4> <p>cloud-to-device (c2d) messages are exposed on the <code>AzureIotThing</code> Thing as <strong>Remote Properties</strong>.</p> <h4 id="direct-method">Direct Method</h4> <p>Direct Methods (Device Methods) are exposed on the <code>AzureIotThing</code> Thing as <strong>Remote Services</strong>.</p> <h3 id="file-transfers">File Transfers</h3> <p>An Azure Blob Storage Container exposed in Thingworx as <code>AzureStorageContainerFileRepository</code> behaves like a normal (remote) <strong>FileRepository</strong>.</p> <h3 id="device-jobs">Device jobs</h3> <h2 id="quick-setup-windows">Quick Setup (Windows)</h2> <div class="admonition warning"> <p class="admonition-title">For testing only</p> </div> <ol> <li>Pre-requisites<ul> <li>an Azure IoTHub</li> <li>an Azure Storage Account with specific requirements:<ul> <li>Firewall is not supported <a href="https://www.ptc.com/en/support/article/CS350044" target="_blank"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"></path></svg></span></a></li> <li>Hierarchical namespace, Blob soft delete, Versioning must be disabled on the Storage used for checkpointing <a href="https://learn.microsoft.com/en-us/azure/event-hubs/event-hubs-java-get-started-send?tabs=passwordless%2Croles-azure-portal#receive-events" target="_blank"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"></path></svg></span></a></li> </ul> </li> <li>a Thingworx platform</li> </ul> </li> <li>Download and extract the <strong>ThingWorx Azure IoT Hub Connector</strong> archive from <a href="https://support.ptc.com/appserver/auth/it/esd/product.jsp?prodFamily=TWC" target="_blank">eSupport portal</a></li> <li>On the platform:<ul> <li>Create an <code>Administrator</code> appKey</li> <li>Import the 2 extensions from <code>&lt;AZX&gt;\extensions</code> (ConnectionService first)</li> <li>Create a Thing that implements the <code>AzureBlobStorageTemplate</code> Template and <a href="https://support.ptc.com/help/thingworx/azure_connector_scm/en/#page/thingworx_scm_azure%2Fazure_connector%2Fc_azure_connector_create_azure_entities_in_thingworx.html" target="_blank">configure</a> it for your Azure Storage Account</li> <li>Create a Thing that implements the <code>AzureIotHubTemplate</code> Template and <a href="https://support.ptc.com/help/thingworx/azure_connector_scm/en/#page/thingworx_scm_azure%2Fazure_connector%2Fc_azure_connector_create_azure_entities_in_thingworx.html" target="_blank">configure</a> it for your Azure IoTHub</li> </ul> </li> <li>On the connector:<ul> <li>Edit <code>&lt;AZX&gt;\connector\bin\azure-iot.bat</code> and add the following line after <code>set DEFAULT_JVM_OPTS=...</code>: <div class="language-bat highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">set</span> <span class="nv">AZURE_IOT_OPTS</span><span class="p">=</span>-Dconfig.file=<span class="nv">%APP_HOME%</span>\conf\azure-iot.conf -Dlogback.configurationFile=<span class="nv">%APP_HOME%</span>\conf\logback.xml -Dconfig.plaintext=true
</span></code></pre></div></li> <li>Edit <code>&lt;AZX&gt;\connector\conf\azure-iot.conf</code> and update the following settings:<ul> <li><code>cx-server.transport.websockets.app-key</code>: the appKey </li> <li><code>cx-server.transport.websockets.platforms</code>: the Thingworx WS endpoint URL</li> <li><code>cx-server.protocol.hub-thing-name</code>: the name of the <code>AzureIotHubTemplate</code> Thing created previously</li> </ul> </li> <li>Start the Connector with <code>&lt;AZX&gt;\connector\bin\azure-iot.bat</code></li> </ul> </li> <li>Testing:<ul> <li>Use the <a href="https://azure-samples.github.io/iot-devkit-web-simulator/" target="_blank">MXChip IoT DevKit Simulator</a> &gt; Get Started as Azure Device</li> <li>From the <a href="https://portal.azure.com" target="_blank">Azure portal</a>, create an Azure Device named <strong>MXCHIP_SIM</strong> (or use the <code>CreateAzureIotDevice</code> service on <code>ConnectionServicesHub</code> from Thingworx)<ul> <li>Get the device connection string from the Azure portal and set it on the simulator</li> <li>Run the Simulator. The simulator telemetry messages have the following format: <div class="language-json highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="p">{</span><span class="nt">"messageId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">"deviceId"</span><span class="p">:</span><span class="s2">"Devkit playground"</span><span class="p">,</span><span class="nt">"temperature"</span><span class="p">:</span><span class="s2">"23.72"</span><span class="p">,</span><span class="nt">"humidity"</span><span class="p">:</span><span class="s2">"71.35"</span><span class="p">}</span>
</span></code></pre></div></li> </ul> </li> <li>From Composer, create an <code>AzureIotThing</code> Thing named <strong>MXCHIP_SIM</strong> (or use the <code>ImportAzureIotDevices</code> service on <code>ConnectionServicesHub</code>)<ul> <li>Update the <code>gatewayThing</code> property to reference the <code>AzureIotHubTemplate</code> Thing</li> <li>Create remote properties named <code>temperature</code> and <code>humidity</code> with type NUMBER</li> </ul> </li> <li>Verify that the temperature and humidity readings are updated on the <strong>MXCHIP_SIM</strong> Thing</li> </ul> </li> </ol> <p>See also <a href="https://community.ptc.com/t5/IoT-Tips/Azure-MXChip-Development-Kit-Learning-Path/ta-p/838928">Azure MXChip Development Kit Learning Path</a></p> <h2 id="troubleshooting">Troubleshooting</h2> <h2 id="class-diagram">Class Diagram</h2> <pre class="mermaid"><code>---
  config:
    class:
      hideEmptyMembersBox: true
---
classDiagram
  AzureBlobStorageTemplate .. AzureStorageContainerFileRepository:fileRepositoryBlobThing@AzureIotHubTemplate
  AzureIotHubAdapterServices &lt;|-- ConnectionServicesHub
  AzureIotThing &lt;|-- myAzureDevice
  AzureIotHubTemplate &lt;|-- myAzureIotHub
  AzureStorageContainerFileRepository &lt;|-- myAzureFileRepository
  AzureIotHubTemplate &lt;-- AzureIotThing:gatewayThing
  myAzureIotHub &lt;-- myAzureDevice:gatewayThing
  AzureBlobStorageTemplate &lt;-- AzureIotHubTemplate:fileRepositoryBlobThing
  AzureBlobStorageTemplate &lt;-- AzureIotHubTemplate:eventProcessorHostBlobThing
  style myAzureIotHub fill:#ffffc5
  style myAzureDevice fill:#ffffc5
  style myAzureFileRepository fill:#ffffc5
  classDef thing fill:#ffffc5
  class AzureIotHubTemplate{
    &lt;&lt;Template&gt;&gt;
    Azure IoTHub configs : Configuration
  }
  class myAzureIotHub:::thing{
    &lt;&lt;Thing&gt;&gt;
  }
  class AzureIotHubAdapterServices{
    &lt;&lt;Shape&gt;&gt;
    CreateAzureIotDevice()
    DeleteAzureIotDevice()
    DescribeAzureIotDevice()
    ImportAzureIotDevices()
  }
  class ConnectionServicesHub{
    &lt;&lt;Thing&gt;&gt;
  }
  class AzureIotThing{
    &lt;&lt;Template::RemoteThing&gt;&gt;
    twinDesired : JSON
    twinReported : JSON
    twinTags : JSON
  }
  class myAzureDevice:::thing{
    &lt;&lt;Thing&gt;&gt;
    myTelemetryData : RemoteProperty
    myc2dData : RemoteProperty
    myDeviceMethod() : RemoteService 
  }
  class AzureBlobStorageTemplate{
    &lt;&lt;Template&gt;&gt;
    accountName : Configuration
    connectionString : Configuration
  }
  class AzureStorageContainerFileRepository{
    &lt;&lt;Template::FileRepository&gt;&gt;
    containerName : Configuration
  }
  class myAzureFileRepository:::thing{
    &lt;&lt;Thing&gt;&gt;
  }</code></pre> <h2 id="external-resources">External Resources</h2> <ul> <li>PTC Help Center - <a href="https://support.ptc.com/help/thingworx/azure_connector_scm/en/" target="_blank">ThingWorx Azure IoT Hub Connector</a></li> <li>PTC Tutorial - <a href="https://community.ptc.com/t5/IoT-Tips/Azure-MXChip-Development-Kit-Learning-Path/ta-p/838928" target="_blank">Connect the Azure MXChip Development Kit to Thingworx</a></li> <li>PTC Tutorial - <a href="https://community.ptc.com/t5/IoT-Tips/Connect-Azure-IoT-Devices-Part-1/ta-p/833021" target="_blank">Connect Azure IoT Devices</a></li> <li>PTC Tutorial - <a href="https://community.ptc.com/t5/IoT-Tips/Azure-Connector-4-Part-1/ta-p/834584" target="_blank">Azure Connector 4 (Setup)</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.tracking", "navigation.path", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script> <script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body> </html>